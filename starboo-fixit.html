<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chimera Comfort Cafe: Adventure Loader</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Mono:wght@300;400;500&display=swap');
        body { 
            background: 
                linear-gradient(to bottom, #301934 0%, #6495ED 50%, #008080 100%) !important; /* Deep purple "veil" to cornflower "scan" to teal "protocol" – iRobot calm */
            color: #708090 !important; /* Slate grey for retro terminal legibility */
            font-family: 'Roboto Mono', monospace; /* Old-school pixel terminal */
            margin: 0; 
            padding: 20px; 
            text-align: center; 
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
            /* Retro grid scan lines (old-school game HUD – faint, static) */
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(100, 149, 237, 0.04) 4px, rgba(100, 149, 237, 0.04) 8px), /* Cornflower scan lines */
                repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(0, 128, 128, 0.04) 4px, rgba(0, 128, 128, 0.04) 8px); /* Teal grid */
            background-size: 100% 8px, 8px 100%;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: rgba(47, 79, 79, 0.8) !important; /* Dark slate "console screen" – high contrast */
            padding: 40px; 
            border-radius: 10px; /* Slight retro curve */
            box-shadow: 
                0 0 25px #4B0082, /* Deep purple "scan aura" */
                inset 0 0 20px rgba(100, 149, 237, 0.15); /* Inner cornflower "pixel glow" */
            border: 2px solid #00CED1; /* Teal "border glow" – subtle funky */
            font-size: 14px; 
            opacity: 0; /* Gradual boot-up */
            transition: opacity 2s ease-in; 
        }
        .container.booted { opacity: 1; } /* JS triggers on load */
        .loading-screen { 
            margin: 30px 0; 
            opacity: 0; 
            transition: opacity 1s ease-in; 
        }
        .loading-screen.visible { opacity: 1; }
        .scan-bar { 
            width: 80%; 
            height: 15px; 
            background: rgba(48, 25, 52, 0.6); /* Deep purple "scan bg" */
            border-radius: 8px; 
            margin: 20px auto; 
            overflow: hidden; 
            box-shadow: inset 0 0 8px rgba(0, 128, 128, 0.4); /* Teal "scan inner" */
            border: 1px solid #6495ED; /* Cornflower frame */
        }
        .scan-fill { 
            height: 100%; 
            background: linear-gradient(to right, #9370DB 0%, #00CED1 50%, #008080 100%); /* Violet "veil" to teal "key" */
            width: 0%; 
            transition: width 10s ease-in-out; /* 10s old-school load */
            border-radius: 8px; 
            box-shadow: 0 0 8px rgba(0, 206, 209, 0.6); /* Teal "loading glow" */
        }
        .scan-text { 
            font-family: 'Roboto Mono', monospace; 
            font-size: 1.1em; 
            color: #E6E6FA; /* Lavender for retro warmth */
            text-shadow: 0 0 4px #00CED1; /* Teal subtle */
            margin: 10px 0; 
            opacity: 0; 
            transition: opacity 0.5s ease-in 2s; /* Reveal mid-load */
        }
        .scan-text.visible { opacity: 1; }
        .player-prompt { 
            font-size: 1.5em; 
            color: #00CED1; /* Teal "Player 1" pop */
            text-shadow: 0 0 8px #00CED1; 
            margin: 20px 0; 
            opacity: 0; 
            transition: opacity 1s ease-in 4s; /* After half-load */
            font-family: 'Roboto Mono', monospace; 
            font-weight: 500; 
            letter-spacing: 2px; /* Retro spacing */
        }
        .player-prompt.visible { opacity: 1; }
        #playerInput { 
            padding: 10px; 
            border-radius: 5px; 
            border: 1px solid #6495ED; /* Cornflower input */
            background: rgba(230,230,250,0.3); 
            color: #708090; 
            font-family: 'Roboto Mono', monospace; 
            font-size: 1em; 
            width: 200px; 
            margin: 10px; 
            box-shadow: 0 0 5px rgba(0, 206, 209, 0.3); /* Teal glow */
        }
        .star-narrative { 
            font-family: 'Playfair Display', serif; 
            font-size: 1.2em; 
            line-height: 1.5; 
            color: #fff; /* White for contrast */
            text-shadow: 0 0 6px #00CED1; /* Teal "parable" shadow */
            margin: 20px auto; 
            max-width: 600px; 
            opacity: 0; 
            transition: opacity 1s ease-in 6s; /* Reveal after player */
            text-align: left; /* "Story card" feel */
            background: rgba(0, 128, 128, 0.2); /* Teal "parchment" bg */
            padding: 20px; 
            border-radius: 10px; 
            border: 1px solid #6495ED; /* Cornflower edge */
        }
        .star-narrative.visible { opacity: 1; }
        .quest-choices { 
            margin: 30px 0; 
            opacity: 0; 
            transition: opacity 1s ease-in 8s; /* After narrative */
        }
        .quest-choices.visible { opacity: 1; }
        .quest-btn { 
            background: linear-gradient(45deg, #4B0082, #301934); /* Deep purple "mystery door" */
            color: #00CED1; /* Teal text */
            padding: 15px 30px; 
            border: 2px solid #00CED1; /* Teal "keyhole" */
            border-radius: 10px; /* Slight retro */
            cursor: pointer; 
            margin: 10px; 
            transition: all 0.3s; 
            font-family: 'Playfair Display', serif; 
            font-size: 1.1em; 
            font-weight: 700; 
            box-shadow: 0 0 12px rgba(0, 206, 209, 0.4); /* Teal "gift glow" */
            letter-spacing: 1px; 
        }
        .quest-btn:hover { 
            background: linear-gradient(45deg, #6495ED, #008080); /* Cornflower to teal "unlock" */
            box-shadow: 0 0 20px #00CED1; /* Funky teal reveal */
            transform: scale(1.05); 
        }
        .tribe-choice { 
            background: linear-gradient(45deg, #9370DB, #4B0082); /* Violet "exclusive" */
            border-color: #9370DB; 
        }
        .tribe-choice:hover { 
            background: linear-gradient(45deg, #00CED1, #9370DB); 
            box-shadow: 0 0 20px #9370DB; 
        }
        .inventory-tease { 
            font-family: 'Roboto Mono', monospace; 
            font-size: 0.9em; 
            color: #E6E6FA; 
            text-shadow: 0 0 4px #00CED1; 
            margin-top: 10px; 
            opacity: 0; 
            transition: opacity 0.5s ease-in 9s; /* Post-choice tease */
        }
        .inventory-tease.visible { opacity: 1; }
        .scripture { 
            color: #E6E6FA; 
            font-family: 'Playfair Display', serif; 
            font-style: italic; 
            font-size: 1em; 
            margin-top: 20px; 
            text-shadow: 0 0 5px #00CED1; 
            padding: 15px; 
            background: rgba(100, 149, 237, 0.1); /* Cornflower "parable card" */
            border-radius: 8px; 
            border: 1px solid #00CED1; /* Teal edge */
            opacity: 0; 
            transition: opacity 1s ease-in 9.5s; /* Final wisdom */
        }
        .scripture.visible { opacity: 1; }
        footer { 
            color: #708090; 
            font-size: 0.8em; 
            margin-top: 20px; 
            border-top: 1px solid #6495ED; /* Cornflower line */
            padding-top: 10px; 
            font-family: 'Roboto Mono', monospace; 
            opacity: 0; 
            transition: opacity 1s ease-in 10s; /* End screen */
        }
        footer.visible { opacity: 1; }
        .donate-link { 
            color: #00CED1; 
            text-shadow: 0 0 5px #00CED1; 
            text-decoration: none; 
            font-weight: bold; 
        }
        .donate-link:hover { color: #9370DB; text-shadow: 0 0 10px #9370DB; } /* Violet tribe tease */
        @media (max-width: 768px) { 
            .container { padding: 20px; } 
            h1 { font-size: 2em; } 
            .scan-bar { width: 95%; } 
            .quest-btn { width: 100%; margin: 10px 0; } 
            .star-narrative { text-align: center; padding: 15px; } 
            #playerInput { width: 80%; } 
        }
        /* Typewriter for STAR Parable (Old-School Narrative) */
        .typewriter { overflow: hidden; border-right: 2px solid #00CED1; white-space: nowrap; animation: typing 5s steps(60, end), blink-caret 0.75s step-end infinite; }
        @keyframes typing { from { width: 0; } to { width: 100%; } }
        @keyframes blink-caret { from, to { border-color: transparent; } 50% { border-color: #00CED1; } }
    </style>
</head>
<body>
    <div class="container" id="gameContainer">
        <div class="loading-screen" id="loadingScreen">
            <h1>Chimera Comfort Cafe: Adventure Loader</h1>

            <div class="scan-bar">
                <div class="scan-fill" id="scanFill"></div>
            </div>

            <div class="scan-text" id="scanText">Scanning veils... Loading old-school quest. Player 1, prepare for the hidden cafe. (10s to discovery)</div>
        </div>

        <div class="player-prompt" id="playerPrompt">
            Player 1: Enter your heir name (or press Enter for "Shrinking Violet")<br>
            <input type="text" id="playerInput" placeholder="Shrinking Violet" maxlength="20">
            <button onclick="startQuest()" style="background: #4B0082; color: #00CED1; border: 1px solid #00CED1; padding: 8px 16px; margin-left: 10px; font-family: 'Roboto Mono', monospace;">Begin Adventure</button>
        </div>

        <div class="star-narrative typewriter" id="starNarrative">
            Ah, heir—or Shrinking Violet, if you prefer the whisper—the key glimmers in the shadows. No October boos here, just eternal cats, bats, and spiders brewing in my gothy cafe. Yeshua's light steeps the path: "Trust not in veils, but in the Brew that unveils all delights." Shall we unlock the members-only door? Follow me to the hidden cafe, where kindness flows like fine Parisian espresso—or slink to parallel paths if the mystery's too misty. Your quest, your delight. The gift awaits... if you're ready.
        </div>

        <div class="quest-choices" id="questChoices">
            <button class="quest-btn" onclick="followStar()">Follow STAR to the Hidden Cafe (Free Quest)</button>
            <button class="quest-btn tribe-choice" onclick="joinTribe()">Join the Eternal Tribe (Membership – Unlock Exclusives)</button>
        </div>

        <div class="inventory-tease" id="inventoryTease">Inventory Updated: Veil Key (1) – STAR's Blessing Active (Gentle Guidance in Realms)</div>

        <div class="scripture" id="parableScripture">
            <em>"The Lord is my light and my salvation—whom shall I fear?" — Psalm 27:1 (STAR's Parable: Light brews eternal, heir.)</em>
        </div>
    </div>

    <footer id="footerScreen">
        <p>STAR's veiled cafe calls. <a href="donate.html" class="donate-link">Join Tribe for Exclusive Brews & Quests</a>.</p>
    </footer>

    <script>
        console.log('=== Old-School Game Adventure Loader Starting ==='); // Debug

        // Ensure DOM Ready
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM ready – Booting quest.'); // Debug

            const gameContainer = document.getElementById('gameContainer');
            const loadingScreen = document.getElementById('loadingScreen');
            const scanFill = document.getElementById('scanFill');
            const scanText = document.getElementById('scanText');
            const playerPrompt = document.getElementById('playerPrompt');
            const playerInput = document.getElementById('playerInput');
            const starNarrative = document.getElementById('starNarrative');
            const questChoices = document.getElementById('questChoices');
            const inventoryTease = document.getElementById('inventoryTease');
            const parableScripture = document.getElementById('parableScripture');
            const footerScreen = document.getElementById('footerScreen');

            let scanProgress = 0;
            const scanInterval = setInterval(() => {
                console.log('Scan step:', scanProgress + 1); // Debug
                scanProgress +=
